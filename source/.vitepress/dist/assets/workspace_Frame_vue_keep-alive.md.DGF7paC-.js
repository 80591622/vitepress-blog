import{_ as a,c as l,o as p,a5 as n,l as s}from"./chunks/framework.BQQWXjGs.js";const d=JSON.parse('{"title":"ä½¿ç”¨keepAliveé‡åˆ°çš„å‘","description":"","frontmatter":{},"headers":[],"relativePath":"workspace/Frame/vue/keep-alive.md","filePath":"workspace/Frame/vue/keep-alive.md","lastUpdated":1713942612000}'),e={name:"workspace/Frame/vue/keep-alive.md"},o=n(`<h1 id="ä½¿ç”¨keepaliveé‡åˆ°çš„å‘" tabindex="-1">ä½¿ç”¨keepAliveé‡åˆ°çš„å‘ <a class="header-anchor" href="#ä½¿ç”¨keepaliveé‡åˆ°çš„å‘" aria-label="Permalink to &quot;ä½¿ç”¨keepAliveé‡åˆ°çš„å‘&quot;">â€‹</a></h1><h2 id="ä»‹ç»" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»" aria-label="Permalink to &quot;ä»‹ç»&quot;">â€‹</a></h2><p><code>keep-alive</code>æ˜¯<code>vue</code>çš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ã€‚å®ƒä¼šç¼“å­˜ä¸æ´»åŠ¨çš„<strong>ç»„ä»¶å®ä¾‹</strong>ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†å…¶é”€æ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç»„ä»¶ï¼Œä¸ä¼šè¢«æ¸²æŸ“åˆ°çœŸå®DOMä¸­ï¼Œä¹Ÿä¸ä¼šå‡ºç°åœ¨çˆ¶ç»„ä»¶é“¾ä¸­ã€‚å®ƒæä¾›äº†<code>include</code>ä¸<code>exclude</code>å±æ€§ï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°è¿›è¡Œç¼“å­˜ï¼Œå…¶ä¸­excludeçš„ä¼˜å…ˆçº§æ¯”includeé«˜ï¼Œmaxæœ€å¤šå¯ä»¥ç¼“å­˜å¤šå°‘ç»„ä»¶å®ä¾‹ã€‚</p><p><a href="https://cn.vuejs.org/v2/api/#keep-alive" target="_blank" rel="noreferrer">keep-aliveè¯¦è§£æ–‡æ¡£</a></p><p>ä½¿ç”¨ <code>keep-alive</code>çš„è¯ä¼šå¢åŠ ä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œ <code>activated</code> å’Œ <code>deactivated</code></p><p>ä¸‹é¢çš„æ–‡ç« æˆ‘æ˜¯<code>keep-alive</code>é…åˆ<code>vue-router</code>ä¸€å—ä½¿ç”¨çš„ï¼Œå½“å‰<code>keep-alive</code>ä¹Ÿå¯ä»¥ç¼“å­˜å•ä¸ªç»„ä»¶ï¼Œåœ¨è¿™é‡Œå°±ä¸å¤šèµ˜è¿°ã€‚</p><h2 id="includeå’Œexclude" tabindex="-1">includeå’Œexclude <a class="header-anchor" href="#includeå’Œexclude" aria-label="Permalink to &quot;includeå’Œexclude&quot;">â€‹</a></h2><p><code>include</code> å’Œ <code>exclude</code> prop å…è®¸ç»„ä»¶æœ‰æ¡ä»¶åœ°ç¼“å­˜ã€‚äºŒè€…éƒ½å¯ä»¥ç”¨<code>é€—å·åˆ†éš”å­—ç¬¦ä¸²</code>ã€<code>æ­£åˆ™è¡¨è¾¾å¼</code>æˆ–ä¸€ä¸ª<code>æ•°ç»„</code>æ¥è¡¨ç¤ºè¯¦ç»†å¥æ–‡æ¡£</p><p>æˆ‘è¿™é‡Œä½¿ç”¨çš„<code>vuex</code>é…åˆæ•°ç»„åŠ¨æ€æ§åˆ¶</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">keep-alive</span><span style="color:#FFFFFF;"> :include=&quot;includes&quot;</span><span style="color:#D19A66;font-style:italic;"> exclude</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#FFFFFF;"> :max=&quot;10&quot;</span><span style="color:#ABB2BF;"> &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">   &lt;</span><span style="color:#E5C07B;">router-view</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E5C07B;">keep-alive</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;"> export default </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">	computed</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">	  includes</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">	     return</span><span style="color:#E06C75;font-style:italic;"> state</span><span style="color:#C678DD;"> =&gt;</span><span style="color:#E5C07B;"> state</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">includes</span></span>
<span class="line"><span style="color:#ABB2BF;">	   }</span></span>
<span class="line"><span style="color:#ABB2BF;">	},</span></span>
<span class="line"><span style="color:#E06C75;">	methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">     changeStoreIncludes</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">       this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">commit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;changeIncludes&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;tableLists&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">   }  </span></span>
<span class="line"><span style="color:#C678DD;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// vuex</span></span>
<span class="line"><span style="color:#E06C75;">mutations</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">	changeIncludes</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">payload</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">	  state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">includes</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> payload</span></span>
<span class="line"><span style="color:#ABB2BF;">	} </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h2 id="includeå’Œexcludeæ— æ•ˆé—®é¢˜" tabindex="-1">includeå’Œexcludeæ— æ•ˆé—®é¢˜ <a class="header-anchor" href="#includeå’Œexcludeæ— æ•ˆé—®é¢˜" aria-label="Permalink to &quot;includeå’Œexcludeæ— æ•ˆé—®é¢˜&quot;">â€‹</a></h2><p>ä½¿ç”¨<code>include/exclude</code> å±æ€§éœ€è¦ç»™æ‰€æœ‰<code>vueç±»çš„name</code>èµ‹å€¼ï¼ˆæ³¨æ„ä¸æ˜¯ç»™routeçš„nameèµ‹å€¼ï¼‰ï¼Œå¦åˆ™ <code>include/exclude</code>ä¸ç”Ÿæ•ˆ</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;"> name</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&#39;TableList&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// include æˆ– excludeæ‰€ä½¿ç”¨çš„name</span></span>
<span class="line"><span style="color:#61AFEF;"> data</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">  return</span><span style="color:#ABB2BF;"> {}</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†" tabindex="-1">ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ† <a class="header-anchor" href="#ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†" aria-label="Permalink to &quot;ç›´æ¥ä½¿ç”¨v-ifåšåŒºåˆ†&quot;">â€‹</a></h2><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">transition</span><span style="color:#D19A66;"> enter-active-class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;animated zoomInLeft&quot;</span><span style="color:#D19A66;"> leave-active-class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;animated zoomOutRight&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">     &lt;</span><span style="color:#E06C75;">keep-alive</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#D19A66;"> v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;$route.meta.keepAlive&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E06C75;">keep-alive</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">transition</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">transition</span><span style="color:#D19A66;"> enter-active-class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;animated zoomInLeft&quot;</span><span style="color:#D19A66;"> leave-active-class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;animated zoomOutRight&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">     &lt;</span><span style="color:#E06C75;">router-view</span><span style="color:#D19A66;"> v-if</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;!$route.meta.keepAlive&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">       &lt;/</span><span style="color:#E06C75;">router-view</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">transition</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™æ ·åšçš„è¯æ›´åŠ ç®€å•æ˜äº†ï¼Œè€Œä¸”é…åˆåŠ¨ç”»æ›´æ­ï¼Œä¸ç”¨å†<code>vue</code>ç»„ä»¶é‡Œé¢å£°æ˜<code>name</code>ï¼Œä½†æ˜¯è¦åœ¨<code>route</code>çš„<code>meta</code>é‡Œé¢æ·»åŠ  <code>{keepAlive:true}</code>å­—æ®µï¼Œå¦‚æœè·¯ç”±æ˜¯åå°æ§åˆ¶çš„è¯ï¼Œå‰ç«¯è°ƒè¯•å°±æ¯”è¾ƒé¸¡è‚‹ã€‚</p><p><strong>æš´éœ²çš„é—®é¢˜</strong></p><p><strong>é—®é¢˜1ï¼š</strong></p><p>ä½ç½®å…¬ç”¨çš„é—®é¢˜ï¼Œå½“å‰åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µé¢çš„æ—¶å€™ï¼Œä½¿ç”¨è·¯ç”±å›åˆ°åˆ—è¡¨ä¹Ÿæ—¶å€™ï¼Œä¼šå‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µã€‚ï¼ˆå¦‚æœä½¿ç”¨æµè§ˆå™¨çš„å›é€€æ–¹å¼ï¼Œä¸ä¼šå‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µã€‚ï¼‰</p><blockquote><p><strong>å¯¹äºè¿™ä¸ªä½ç½®å…¬ç”¨çš„æƒ…å†µï¼Œæˆ‘æ˜¯ä¸€å¤´é›¾æ°´ï¼ŒæœŸå¾…å¤§ä½¬è§£ç­”</strong> ğŸ¤ï¼Œæœ‰å‡ ç‚¹è¦è¯´çš„ä¸çŸ¥å¯¹é”™ï¼Œå¾…æ±‚è¯ã€‚</p><ul><li><strong>å¤šé¡µé¢</strong></li></ul><ol><li>å¦‚æœæœ‰æ•°æ®è¯·æ±‚çš„è¯ï¼Œæµè§ˆå™¨å°†ä¼šæŠŠé¡µé¢ç½®é¡¶ï¼Ÿ</li><li>å¦‚æœæ˜¯é™æ€é¡µé¢çš„è¯ï¼Œæµè§ˆå™¨ä¼šæ»šåˆ°ä½ ä¹‹å‰æ»šåŠ¨çš„åœ°æ–¹ï¼Ÿ</li><li>ä¸Šé¢ä»…ä»…æ˜¯ä½¿ç”¨çš„æµè§ˆå™¨çš„è·³è½¬è¡Œä¸ºï¼Œå¦‚æœä½¿ç”¨hrefæˆ–è€…è·¯ç”±å°è£…ä¸€äº›æ–¹æ³•ï¼Œåˆ™éƒ½ä¼šç½®é¡¶ï¼Ÿ</li></ol><ul><li><strong>æ±‚è¯ä¸Šé¢ ğŸ¤</strong></li></ul><ol start="4"><li>åŸºäºSPAæ¨¡å¼å¼€å‘ï¼Œæ‰€ä»¥é¡µé¢ä»…æœ‰ä¸€ä¸ªï¼Œå®ç°é¡µé¢åˆ‡æ¢æ˜¯åˆ©ç”¨å“ˆå¸Œä¸ç»„ä»¶çš„æ˜ å°„å…³ç³»ï¼Œvue-routeræ˜¯é€šè¿‡å“ˆå¸Œæ¥æ¨¡æ‹Ÿå®Œæ•´çš„urlï¼Œä½†æ˜¯å¯¹äºé¡µé¢æ¥è¯´ä»æ˜¯ä¸€ä¸ªurlï¼Œæ‰€ä»¥åœ¨ä»»ä½•ä¸€ä¸ªç»„ä»¶æ»šåŠ¨é¡µé¢ï¼Œåˆ‡æ¢åˆ°å…¶ä»–ç»„ä»¶çš„æ—¶å€™ï¼Œé¡µé¢ä»ä¿æŒæ»šåŠ¨ä¹‹å‰çš„çŠ¶æ€ï¼Œè¿™å°±æ˜¯å‡ºç°ä½ç½®å…¬ç”¨çš„æƒ…å†µ.</li></ol></blockquote><p><strong>é—®é¢˜2ï¼š</strong></p><p>åŠ å…¥æœ‰<code>A B C</code>ä¸‰ä¸ªé¡µé¢ï¼Œæˆ‘ç°åœ¨åªæƒ³è¦<code>A-&gt;B</code>æ—¶<code>A</code>ç¼“å­˜ï¼Œç„¶å<code>B-&gt;A</code>æ—¶ï¼Œå±•ç¤ºç¼“å­˜çš„é¡µé¢ï¼Œ<code>C-&gt;A</code>ã€<code>A-&gt;B-&gt;C-&gt;A</code>ç­‰éƒ½ä¸è¦ç¼“å­˜ã€‚</p><h2 id="scrollbehavior" tabindex="-1">scrollBehavior <a class="header-anchor" href="#scrollbehavior" aria-label="Permalink to &quot;scrollBehavior&quot;">â€‹</a></h2><p>å¯¹äº <strong><code>é—®é¢˜1</code></strong> æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œè·³è½¬å‰ç›´æ¥æŠŠæ»šåŠ¨é«˜åº¦ç¼“å­˜èµ·æ¥ï¼Œç„¶åæ¯æ¬¡å†å›æ¥çš„æ—¶å€™ï¼Œåœ¨æŠŠé«˜åº¦åœ¨é‡æ–°èµ‹å€¼ç»™å®ƒï¼Œä½†æ˜¯å¦‚æœæˆ‘é¡µé¢ç‰¹åˆ«å¤šéƒ½éœ€è¦ä½¿ç”¨ç¼“å­˜çš„æ—¶å€™ï¼Œå°±æœ‰äº›éº»çƒ¦ï¼Œç„¶åæˆ‘å‘ç°è·¯ç”±æä¾›çš„ä¸€ä¸ªè¿™æ ·çš„æ–¹æ³•ã€‚</p><p><a href="https://router.vuejs.org/zh/guide/advanced/scroll-behavior.html" target="_blank" rel="noreferrer">scrollBehavioræ–‡æ¡£è¯¦è§£</a></p><p><strong>scrollBehavior</strong> æ–¹æ³•æ¥æ”¶ to å’Œ from è·¯ç”±å¯¹è±¡ã€‚<strong>ç¬¬ä¸‰ä¸ªå‚æ•° <code>savedPosition</code></strong> å½“ä¸”ä»…å½“ popstate å¯¼èˆª (<code>é€šè¿‡æµè§ˆå™¨çš„ å‰è¿›/åé€€ æŒ‰é’®è§¦å‘</code>) æ—¶æ‰å¯ç”¨ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> router</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> VueRouter</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#E06C75;">  mode</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;hash&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">  routes</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">  scrollBehavior</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">savedPosition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // æ­¤æ–¹æ³•é»˜è®¤æ˜¯æ£€æµ‹ document.body çš„ï¼Œå¦‚æœä½ æ˜¯è‡ªå®šä¹‰çš„æ»šåŠ¨ç›’å­ æ˜¯æ²¡åŠæ³•æ§åˆ¶ä½ çš„æ»šåŠ¨é«˜åº¦ï¼Œéƒ½æ˜¯ 0</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedPosition</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å¦‚æœè¿”å›ä¸€ä¸ª falsy(ä¸æ˜¯false) ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œé‚£ä¹ˆä¸ä¼šå‘ç”Ÿæ»šåŠ¨,è¯´ç™½äº†å°±æ˜¯è¿™ä¸ªæ–¹æ³•æ²¡ç”¨ï¼Œå¹¶ä¸ä¼šåœ¨é¡µé¢é¡¶éƒ¨</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // falsyæ–‡æ¡£ https://developer.mozilla.org/zh-CN/docs/Glossary/Falsy</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">savedPosition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#E06C75;"> savedPosition</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">keepAlive</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // è¿™é‡Œå¹¶ä¸å‡†ç¡®ï¼Œå¯èƒ½æˆ‘é¡µé¢æ»šåŠ¨çš„ç›’å­ä¸æ˜¯body,vueåº”è¯¥æœ‰è®¾ç½®çš„åœ°æ–¹</span></span>
<span class="line"><span style="color:#E5C07B;">        from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">documentElement</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">y</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#56B6C2;"> ||</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#E06C75;"> router</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ–°ç‰ˆæœ¬æ”¯æŒå¼‚æ­¥æ»šåŠ¨ï¼Œè¿”å›ä¸€ä¸ªPromiseï¼Œè¿™ä¸ªç‰¹åˆ«æœ‰ç”¨ï¼Œä¹‹å‰çš„æ–¹å¼å¦‚æœé¡µé¢é‡Œæœ‰å¼‚æ­¥è¯·æ±‚çš„è¯ï¼Œæ˜¯ä¸èƒ½å¤Ÿç½®é¡¶çš„</span></span>
<span class="line"><span style="color:#61AFEF;">scrollBehavior</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">savedPosition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">savedPosition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">reject</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">      setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedPosition</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">      }, </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">keepAlive</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">documentElement</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">y</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#56B6C2;"> ||</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°" tabindex="-1">å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–° <a class="header-anchor" href="#å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°" aria-label="Permalink to &quot;å®ç°è¿”å›ä¸åˆ·æ–°ã€å…¶ä»–èœå•è¿›å…¥åˆ·æ–°&quot;">â€‹</a></h2><h3 id="å®ç°æ–¹å¼ä¸€" tabindex="-1">å®ç°æ–¹å¼ä¸€ <a class="header-anchor" href="#å®ç°æ–¹å¼ä¸€" aria-label="Permalink to &quot;å®ç°æ–¹å¼ä¸€&quot;">â€‹</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// app.vue</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">keep-alive</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">   &lt;</span><span style="color:#E5C07B;">router-view</span><span style="color:#D19A66;font-style:italic;"> v-if</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;$route.meta.keepAlive&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E5C07B;">keep-alive</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">router-view</span><span style="color:#D19A66;font-style:italic;"> v-if</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;!$route.meta.keepAlive&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// router.js</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">   path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/table-list&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">   name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;table-list&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">   component</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">TableList</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">   meta</span><span style="color:#ABB2BF;">: {</span><span style="color:#E06C75;">keepAlive</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">} </span><span style="color:#7F848E;font-style:italic;">// æ·»åŠ è¿™ä¸ª</span></span>
<span class="line"><span style="color:#ABB2BF;"> },</span></span>
<span class="line"><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">   path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;/table-detail&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">   name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;table-detail&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">   component</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#61AFEF;"> import</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;../views/table-detail.vue&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æ–¹å¼ä¸€å’Œæ–¹å¼äºŒéƒ½æ˜¯åŸºäºä¸Šé¢è¿™ä¸¤ä¸ªä»£ç æ®µã€‚</p><p>åœ¨è¦ç¼“å­˜çš„åˆ—è¡¨é¡µæ·»åŠ ä¸‹é¢çš„ä»£ç </p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">activated</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿›æ¥çš„æ—¶å€™ï¼Œå°±ä¸ç”¨æ‰§è¡Œä¸‹é¢çš„å‡½æ•°ã€‚</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">hasFirst</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span></span>
<span class="line"><span style="color:#E5C07B;">  this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#61AFEF;">beforeRouteLeave</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;table-detail&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">keepAlive</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">keepAlive</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">keepAlive</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">    this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$destroy</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">//é”€æ¯ç±»é¡µè¡¨é¡µçš„å®ä¾‹ï¼Œæœ‰å‘</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#61AFEF;">  next</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å®Œæˆä¸Šé¢çš„ä»£ç åï¼Œ<code>A-&gt;B-&gt;A</code>æ­£å¸¸ï¼Œç„¶åå½“<code>A-&gt;C-&gt;A-&gt;B-&gt;A </code>å‘ç°åˆ—è¡¨é¡µAä¸ä¼šå†ç¼“å­˜äº†ï¼Œæ¯æ¬¡éƒ½æ˜¯æ–°çš„é¡µé¢ã€‚è°·æ­Œåçš„æ–¹æ³•æ˜¯è‹¥ä¸æ˜¯ç¬¬ä¸€æ¬¡è¿›å…¥å°±å¼ºåˆ¶åˆ·æ–°ä¸€æ¬¡ç¼“å­˜é¡µé¢ã€‚ <strong><code>this.$destroy()</code></strong> è°ƒç”¨<code>distory</code>ä¹‹åä¸èƒ½å†ç¼“å­˜è¯¥ç»„ä»¶ è€Œä¸”ä¼šä¸æ–­è¿›å…¥è¿™ä¸ªé¡µé¢åé‡å¤ç”Ÿæˆå¤šä¸ªè™šæ‹Ÿdom.</p><p>ç»§ç»­å®Œå–„ï¼Œåœ¨<code>main.js</code>ä¸­ä½¿ç”¨router.afterEach((to,from)=&gt;{})</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// åŸç†æ˜¯å¦‚æœä¸æ˜¯ä»è¯¦æƒ…é¡µè¿›æ¥çš„é¡µé¢ï¼Œéƒ½éœ€è¦åˆ·æ–°ï¼Œå¦åˆ™ä¸èƒ½ç¼“å­˜</span></span>
<span class="line"><span style="color:#E5C07B;">router</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">afterEach</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">from</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // å¦‚æœå½“å‰é¡µé¢åˆ·æ–°æˆ–è€…ä»è¯¦æƒ…ä¹Ÿè¿›æ¥ï¼Œå°±è¦æ‰§è¡Œä¸‹é¢ä»£ç ï¼Œé˜²æ­¢æ‰§è¡Œé”€æ¯æ–¹æ³•å¯¼è‡´ä¸èƒ½ç¼“å­˜</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">from</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> from</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &#39;table-detail&#39;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;table-list&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    let</span><span style="color:#E06C75;"> isRefresh</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> sessionStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getItem</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;isRefresh&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">isRefresh</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;0&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#61AFEF;">      setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span><span style="color:#7F848E;font-style:italic;">// è¿™é‡Œå¿…é¡»æ˜¯å¼‚æ­¥çš„ï¼Œä¸ç„¶ä¸èƒ½è·³è½¬</span></span>
<span class="line"><span style="color:#E5C07B;">        window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">location</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reload</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">      })</span></span>
<span class="line"><span style="color:#E5C07B;">      sessionStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setItem</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;isRefresh&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">      sessionStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setItem</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;isRefresh&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;0&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">from</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;table-list&#39;</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;table-detail&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">    sessionStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setItem</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;isRefresh&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">    sessionStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setItem</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;isRefresh&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;0&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>æˆ‘ä¸çŸ¥é“è°·æ­Œå‡ºæ¥çš„è§£å†³æ–¹æ¡ˆä¸ºä»€ä¹ˆéƒ½åœ¨è¯¦æƒ…é¡µåˆ·æ–°ï¼Œè¿™æ ·çš„é—®é¢˜å°±æ˜¯ç”¨æˆ·ç¬¬ä¸€æ¬¡è·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œå†å›åˆ°åˆ—è¡¨é¡µæ˜¯æ²¡æœ‰ç¼“å­˜çš„åŠŸèƒ½ï¼Œç¬¬äºŒæ¬¡å°±ä¼šæ­£å¸¸ï¼Œä½†æ˜¯å®¢æˆ·å¾ˆå¯èƒ½å°±ä¼šæ‰§è¡Œè¿™ä¸€æ¬¡æ“ä½œï¼›</p><p>è¿™ç§è§£å†³æ–¹å¼å¤ªè¿‡åŸå§‹ï¼Œç”¨æˆ·ä½“éªŒå¤ªå·®ï¼Œè€Œä¸”éœ€è¦ç¼“å­˜å¤šä¸ªé¡µé¢å°±ä¸å¤ªå¥½æ§åˆ¶ï¼Œä¸å»ºè®®ç”¨è¿™ä¸ªæ–¹æ³•</p><h3 id="å®ç°æ–¹å¼äºŒ" tabindex="-1">å®ç°æ–¹å¼äºŒ <a class="header-anchor" href="#å®ç°æ–¹å¼äºŒ" aria-label="Permalink to &quot;å®ç°æ–¹å¼äºŒ&quot;">â€‹</a></h3><p>çµæ„Ÿæ¥è‡ª<code>æ–¹å¼ä¸€</code>ï¼Œæˆ‘å¯ä»¥å…¶ä»–æ–¹å¼æ¨¡æ‹Ÿé¡µé¢åˆ·æ–°ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;!--è¿™é‡Œä¸€å®šè¦ä½¿ç”¨v-ifï¼Œå¥½å¤„æ˜¯ä½ å¯ä»¥ä½¿ç”¨$nextTickä½“éªŒæ›´å¥½ï¼Œå¦ä¸€æ–¹é¢æ˜¯åœ¨ä½¿ç”¨v-showä¹‹åï¼Œä»–å°±ç›¸å½“äºéšè—äº†è¯¥é¡µé¢ï¼Œä½†æ˜¯å¦‚æœé‡Œé¢æœ‰ä¸€äº›ä¸ä¼šdiffçš„dom,å°±ä¼šå±•ç¤ºå‡ºæ¥ï¼Œæ¨¡æ‹Ÿåˆ·æ–°çš„ä½“éªŒå°±ä¸å¤ªå¥½ã€‚ä¾‹å¦‚ä½¿ç”¨ input-&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#D19A66;font-style:italic;"> v-if</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;isRouterAlive&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">ddd</span><span style="color:#ABB2BF;">}</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">input</span><span style="color:#D19A66;font-style:italic;"> v-model</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;ddd&quot;</span><span style="color:#D19A66;font-style:italic;"> type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">table-list</span><span style="color:#D19A66;font-style:italic;"> ref</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;table&quot;</span><span style="color:#FFFFFF;"> :multiple=&quot;true&quot;</span><span style="color:#FFFFFF;"> :otherTableParams=&quot;otherTableParams&quot;</span><span style="color:#FFFFFF;"> :tableColumn=&quot;column&quot;/&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;">    &lt;/div&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;">&lt;script&gt;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">  export</span><span style="color:#D19A66;font-style:italic;"> default</span><span style="color:#C678DD;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å…¶ä»–ä»£ç  ........</span></span>
<span class="line"><span style="color:#61AFEF;">    activated</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#61AFEF;">      if</span><span style="color:#ABB2BF;"> (this.$route.meta.isRefresh) { </span><span style="color:#7F848E;font-style:italic;">// å¦‚æœä¸æ˜¯è·³è½¬åˆ°è¯¦æƒ…é¡µ</span></span>
<span class="line"><span style="color:#C678DD;">        const</span><span style="color:#E5C07B;"> resetData</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$options</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">data</span><span style="color:#ABB2BF;">() </span><span style="color:#7F848E;font-style:italic;">// è·å–åŸæ¥dataçš„æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">        delete</span><span style="color:#E5C07B;"> resetData</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">column</span><span style="color:#7F848E;font-style:italic;">  // æˆ‘åœ¨è¿™é‡Œæ“ä½œçš„åŸå› æ˜¯å› ä¸ºï¼Œæˆ‘é€šè¿‡ä¸Šé¢è·å–çš„æ•°æ®é‡Œé¢ï¼Œç”¨åˆ°å‡½æ•°è¿”å›çš„å½¢å¼ï¼Œå±•ç¤ºä¸ºundefined  {cb: this.jumpEdit} å±•ç¤ºä¸º {cb: this.undefined},å…·ä½“åŸå› æœªçŸ¥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">        Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assign</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">resetData</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// é‡ç½®data</span></span>
<span class="line"><span style="color:#E5C07B;">        this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isRouterAlive</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#7F848E;font-style:italic;"> // é€šè¿‡v-ifä¸å±•ç¤ºå½“å‰é¡µé¢ </span></span>
<span class="line"><span style="color:#E5C07B;">        this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$nextTick</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () { </span></span>
<span class="line"><span style="color:#E5C07B;">          window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scroll</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// é¡µé¢ç½®é¡¶ï¼Œä¸è¦å†ä¸‹é¢çš„å®šæ—¶å™¨é‡Œé¢ä½¿ç”¨ï¼Œæœ‰é¡¿æŒ«æ„Ÿ</span></span>
<span class="line"><span style="color:#E5C07B;">          this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isRouterAlive</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#7F848E;font-style:italic;"> // é€šè¿‡v-ifå±•ç¤ºå½“å‰é¡µé¢ </span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#61AFEF;">        setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">          this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">() </span><span style="color:#7F848E;font-style:italic;">// å¼‚æ­¥è·å–æ•°æ®ï¼Œè·Ÿæˆ‘çš„é¡¹ç›®ç»„ä»¶æœ‰å…³ï¼Œä½ ä»¬å¯ä»¥ç›´æ¥åœ¨ä¸Šé¢è·å–å°±OK</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#61AFEF;">    beforeRouteLeave</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // åˆ¤æ–­å¦‚æœä¸æ˜¯è¿›è¯¦æƒ…é¡µï¼Œå±•ç¤ºä¸ºtrue æ˜¯é¡µé¢é‡æ–°åŠ è½½çš„æ„æ€</span></span>
<span class="line"><span style="color:#ABB2BF;">      from.meta.</span><span style="color:#E06C75;">isRefresh</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &#39;table-detail&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">      next</span><span style="color:#ABB2BF;">() </span><span style="color:#7F848E;font-style:italic;">// ä¸æ·»åŠ è·¯ç”±ä¸ä¼šè·³è½¬</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">  }</span></span>
<span class="line"><span style="color:#FFFFFF;">&lt;/script&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><strong>ä¼˜åŒ–</strong> ç°åœ¨çš„ä»£ç æœ‰ä¸¤ä¸ªé—®é¢˜ <code>ä¸€</code>æ˜¯ä»è¯¦æƒ…é¡µåˆ°åˆ—è¡¨é¡µï¼Œæ•°æ®ä¸ä¼šæ›´æ–°ï¼Œå¦‚æœæˆ‘åœ¨è¯¦æƒ…é¡µä¿®æ”¹äº†æŸä¸ªæ•°æ®ï¼Œç„¶åå†åˆ°åˆ—è¡¨é¡µå°±ä¼šæ»å; <code>äºŒ</code>æ˜¯ä»è¯¦æƒ…é¡µè·³è½¬åˆ°åˆ«çš„åˆ—è¡¨é¡µç„¶ååœ¨è·³è½¬åˆ°ç¼“å­˜çš„åˆ—è¡¨é¡µï¼Œç„¶åä»–è¿˜æ˜¯ä¼šç¼“å­˜ä¹‹å‰çš„æ•°æ®ï¼Œä¸ä¼šæ›´æ–°å½“å‰é¡µé¢;</p><p>ä¼˜åŒ–å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">activated</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿›æ¥ä¸æ‰§è¡Œä¸‹é¢çš„æ–¹æ³•ï¼Œå¦åˆ™ä¼šè¯·æ±‚ä¸¤æ¬¡æ•°æ®</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> // this.hasFirst ä¸ç”¨ç”Ÿæˆå“åº”å¼çš„ï¼Œç›´æ¥ä¸€ä¸ªå˜é‡å°±å¥½</span></span>
<span class="line"><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">hasFirst</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span></span>
<span class="line"><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$route</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isRefresh</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> data</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$options</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">data</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#C678DD;">    delete</span><span style="color:#E5C07B;"> data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">column</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">    Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">assign</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">$data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">    this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isRouterAlive</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span></span>
<span class="line"><span style="color:#E5C07B;">    this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$nextTick</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">      window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scroll</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isRouterAlive</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#61AFEF;">    setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#C678DD;"> if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$route</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isRefresh</span><span style="color:#56B6C2;"> ===</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">) { </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // this.$route.meta.isRefreshåœ¨è·¯ç”±é‡Œé¢æˆ‘å¹¶æ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤æ˜¯undefinedï¼Œå½“ä»–ä¸ºfalseçš„æ—¶å€™ï¼Œè¯´æ˜ä»–ä»åˆ«çš„é¡µé¢è¿›æ¥äº†ï¼Œè¿™ä¸ªæ—¶å€™è®©ä»–è¯·æ±‚ä¸‹æ•°æ®</span></span>
<span class="line"><span style="color:#E5C07B;">    this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">beforeRouteEnter</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> // è¿™ä¸ªè·¯ç”±å®ˆå«å‡½æ•°å¼æœ€å…ˆæ‰§è¡Œçš„</span></span>
<span class="line"><span style="color:#E5C07B;"> to</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isRefresh</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> from</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> from</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &#39;table-detail&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">  next</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¸‹é¢ä»£ç æ³¨é‡Šå³å¯</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// beforeRouteLeave(to, from, next) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   from.meta.isRefresh = to.name !== &#39;table-detail&#39;;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   next()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>æœ€åå¯ä»¥æŠŠè¿™äº›ä»£ç æŠ½ç¦»æˆä¸€ä¸ª<code>mixins</code>,ç„¶åç¼–å†™ä¸€ä¸ªåˆ·æ–°çš„ç»„ä»¶ï¼Œå“ªé‡Œç”¨åœ¨å“ªé‡Œè°ƒå–ä¸‹,<a href="/2020/06/15/workspace/Frame/vue/reload/">ä¹Ÿå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« </a>ã€‚</p><h3 id="å®ç°æ–¹å¼ä¸‰" tabindex="-1">å®ç°æ–¹å¼ä¸‰ <a class="header-anchor" href="#å®ç°æ–¹å¼ä¸‰" aria-label="Permalink to &quot;å®ç°æ–¹å¼ä¸‰&quot;">â€‹</a></h3><p>è¿™ç§ç”¨ <code>keep-alive</code> æä¾›çš„ <code>include</code> å’Œ <code>exclude </code>,ç„¶åé…åˆvuexå®ç°åŠ¨æ€æ§åˆ¶ã€‚</p><p><strong>è·¯ç”±å…¥å£é¡µé¢</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// app.vue</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">keep-alive</span><span style="color:#FFFFFF;"> :include=&#39;includes&#39;</span><span style="color:#FFFFFF;"> :exclude=&#39;&#39;:max=&quot;3&quot;&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;">  &lt;router-view&gt;&lt;/router-view&gt;</span></span>
<span class="line"><span style="color:#FFFFFF;">&lt;/keep-alive&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å…¶ä¸­<code>include</code>ä»£è¡¨ç€è¦ç¼“å­˜çš„ï¼Œ<code>exclude</code>ä»£è¡¨ç€éç¼“å­˜çš„,<code>max</code>ä»£è¡¨æœ€å¤šç¼“å­˜çš„ä¸ªæ•°ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// è·å–vuexçš„æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">mapGetters</span><span style="color:#ABB2BF;">} </span><span style="color:#C678DD;">from</span><span style="color:#98C379;"> &#39;vuex&#39;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  computed</span><span style="color:#ABB2BF;">: {</span><span style="color:#7F848E;font-style:italic;">// åœ¨computedä¸­åŠ¨æ€ç›‘æ§</span></span>
<span class="line"><span style="color:#ABB2BF;">     ...</span><span style="color:#61AFEF;">mapGetters</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&#39;includes&#39;</span><span style="color:#ABB2BF;">]),</span></span>
<span class="line"><span style="color:#ABB2BF;">   },</span></span>
<span class="line"><span style="color:#E06C75;">  methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">     changeStore</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       // æ”¹å˜vueçš„æ•°æ®ï¼Œåœ¨è¿™ç”¨ä¸åˆ°</span></span>
<span class="line"><span style="color:#E5C07B;">       this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">commit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;change&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;tableLists&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">   }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>Vuex</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> keepalive</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  state</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    includes</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;tableLists&#39;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#E06C75;">  mutations</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">    change</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">state</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">payload</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">includes</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> payload</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#E06C75;">  getters</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">    includes</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">state</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#E5C07B;"> state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">includes</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#E06C75;"> keepalive</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>åˆ—è¡¨é¡µçš„éƒ¨åˆ†ä»£ç </strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">activated</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // åŒä¸Šï¼Œå¦‚æœç¬¬ä¸€æ¬¡è¿›æ¥ï¼Œä¸æ‰§è¡Œä¸‹é¢çš„æ–¹æ³•</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">hasFirst</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span></span>
<span class="line"><span style="color:#E5C07B;">  this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#61AFEF;">beforeRouteEnter</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // è¿™ä¸ªæ—¶å€™è¿˜æœ‰æ²¡this,æ‰€ä»¥è¿™é‡Œç”¨thisçš„è¯æ˜¯ä¸èƒ½æ“ä½œvuex,æˆ‘æ˜¯åœ¨main.jsé‡Œé¢èµ‹å€¼ç»™äº†window</span></span>
<span class="line"><span style="color:#E5C07B;">  window</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">_store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">commit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;change&#39;</span><span style="color:#ABB2BF;">, [</span><span style="color:#98C379;">&#39;tableLists&#39;</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#61AFEF;">  next</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // ä¹Ÿå¯ä»¥è¿™ä¹ˆç”¨</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // next((el) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  //  el.$store.commit(&#39;change&#39;, [&#39;tableLists&#39;]);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // })</span></span>
<span class="line"><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#61AFEF;">beforeRouteLeave</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  // è¿™é‡Œå¯ä»¥ç»Ÿä¸€åœ¨ scrollBehavior å¤„ç†å°±å¥½äº†ï¼ˆå»ºè®®åœ¨è¿™é‡Œæ·»åŠ  = å‚è€ƒä¸‹é¢ï¼‰</span></span>
<span class="line"><span style="color:#E5C07B;">  from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">documentElement</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &#39;table-detail&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // å¦‚æœä¸æ˜¯è·³è½¬åˆ°è¯¦æƒ…é¡µé¢ï¼Œå°±ç©¿ä¸ªç©ºæ•°ç»„ï¼Œè¿™é‡Œä¸èƒ½ç”¨ &#39;&#39; é»˜è®¤æ˜¯æ‰€æœ‰çš„éƒ½ç¼“å­˜</span></span>
<span class="line"><span style="color:#E5C07B;">    this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">commit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;change&#39;</span><span style="color:#ABB2BF;">, []);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#61AFEF;">  next</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>è¯¦æƒ…é¡µçš„éƒ¨åˆ†ä»£ç </strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">beforeRouteLeave</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;"> !==</span><span style="color:#98C379;"> &#39;table-list&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">    this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">commit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;change&#39;</span><span style="color:#ABB2BF;">, []);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#61AFEF;">  next</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>è·¯ç”±é¡µé¢</strong></p><p>å› ä¸ºincludesæ²¡æœ‰åœ¨è·¯ç”±é‡Œé¢å®šä¹‰ keepalive,æ‰€ä»¥ä¸Šé¢çš„<code>scrollBehavior</code>è¿™ä¸ªæ–¹æ³•å½“ä½¿ç”¨åˆæˆäº‹ä»¶è·³è½¬çš„æ—¶å€™ï¼Œéœ€è¦åšé¢å¤–çš„å¤„ç†</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">scrollBehavior</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">to</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">from</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">savedPosition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">  if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">savedPosition</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#C678DD;"> new</span><span style="color:#E5C07B;"> Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">      setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">        resolve</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedPosition</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">      }, </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">  } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#E5C07B;"> ary</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> [</span><span style="color:#98C379;">&#39;Invest&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;Store&#39;</span><span style="color:#ABB2BF;">];  </span><span style="color:#7F848E;font-style:italic;">// è¿™é‡Œéœ€è¦ç¼“å­˜çš„é¡µé¢çš„routeçš„name   ä¸æ˜¯vueç±»çš„name</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // è¿™é‡Œåˆ—è¡¨é¡µè·³è½¬åˆ°åˆ«çš„é¡µé¢ï¼Œä¹Ÿä¼šä¿ç•™é¡µé¢çš„æ»šåŠ¨é«˜åº¦ä½†æ˜¯å¹¶æ²¡æœ‰ç¼“å­˜å½“å‰çš„é¡µé¢ï¼Œæ‰€ä»¥å½“é¡µé¢å†æ¬¡è¿”å›çš„æ—¶å€™ä¼šé‡æ–°åŠ è½½å½“å‰é¡µé¢</span></span>
<span class="line"><span style="color:#C678DD;">    if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ary</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">includes</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">from</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      /* æœ€è¿‘ä¸€æ¬¡å›é¡¾çš„æ—¶å€™ å‘ç°äº†ä¸€ä¸ªé—®é¢˜</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       * å¦‚æœæ˜¯åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µï¼Œè¿™ä¸ªæ—¶å€™æ—¶å€™å…¶å®å·²ç»åˆ°äº†è¯¦æƒ…é¡µé¢ï¼Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       * å¦‚æœå½“å½“å‰è¯¦æƒ…é¡µçš„é¡µé¢çš„é«˜åº¦æ²¡æœ‰åˆ—è¡¨é¡µé¢è·³è½¬è¿›æ¥æ—¶æ»šåŠ¨çš„é«˜åº¦é«˜çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šè·å–ä¸çœŸæ­£çš„é¡µé¢é«˜åº¦ï¼Œç„¶ååˆæˆäº‹ä»¶å›é€€çš„æ—¶å€™å°±ä¼šæ»šåŠ¨ä¸åˆ°è·³è½¬å‰çš„ä½ç½®</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">       * è§£å†³çš„åŠæ³•å°±æ˜¯åœ¨æ¯ä¸ªé¡µé¢ç¦»å¼€å‰ï¼Œè·å–åˆ°é¡µé¢çš„é«˜åº¦ï¼Œå­˜åˆ°çš„metaä¸Šï¼Œè¿™æ ·æ—¢èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿèƒ½ç»“å±€æŠŠä¸æ˜¯bodyæ»šåŠ¨çš„æƒ…å†µè·å–ä¸åˆ°æ»šåŠ¨é«˜åº¦çš„é—®é¢˜ã€‚</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      */</span></span>
<span class="line"><span style="color:#E5C07B;">      from</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> document</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">documentElement</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">y</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">to</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">meta</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">scrollTop</span><span style="color:#56B6C2;"> ||</span><span style="color:#D19A66;"> 0</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ä¸Šé¢çš„ä»£ç æ¯”è¾ƒçç¢ï¼Œéœ€è¦æ·»åŠ åˆ°æ¯ä¸€ä¸ªé¡µé¢ï¼Œæ‰€ä»¥åœ¨å®é™…é¡¹ç›®ä¸­å¤§å®¶å¯æ·»åŠ ä¸€ä¸ªkeepaliveçš„mixins,æ–¹ä¾¿å¤§å®¶ç®¡ç†ã€‚</p><p><strong>ä½¿ç”¨includeå’Œexcludeçš„æ³¨æ„ç‚¹ï¼š</strong></p>`,63),r=s("ol",null,[s("li",{"name:xx":""},"æ¯ä¸ªç»„ä»¶å†…éƒ¨æ·»åŠ "),s("li",null,"è‹¥å°†includeè®¾ç½®ç©º ' ' æ¯ä¸ªé¡µé¢éƒ½å°†ä¼šç¼“å­˜"),s("li",null,"excludeçš„ä¼˜å…ˆçº§é«˜äºinclude ä½¿ç”¨excludeå")],-1),c=n('<h2 id="å‚è€ƒæ–‡æ¡£" tabindex="-1">å‚è€ƒæ–‡æ¡£ <a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£" aria-label="Permalink to &quot;å‚è€ƒæ–‡æ¡£&quot;">â€‹</a></h2><p><a href="https://github.com/vuejs/vue/blob/dev/src/core/components/keep-alive.js" target="_blank" rel="noreferrer">keep-alive</a></p><p><a href="https://github.com/vuejs/vue-router/issues/811" target="_blank" rel="noreferrer">vueRouterIssues</a></p><p><a href="https://github.com/vuejs/vue-router/blob/dev/src/util/scroll.js#L10:1" target="_blank" rel="noreferrer">scrollBehavior</a></p><p><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html#%E5%85%A8%E5%B1%80%E5%89%8D%E7%BD%AE%E5%AE%88%E5%8D%AB" target="_blank" rel="noreferrer">å¯¼èˆªå®ˆå«</a></p>',5),t=[o,r,c];function B(i,y,F,b,u,A){return p(),l("div",null,t)}const C=a(e,[["render",B]]);export{d as __pageData,C as default};
