import{_ as s,c as n,o as a,a5 as l}from"./chunks/framework.BQQWXjGs.js";const b=JSON.parse('{"title":"NodeJs 插件拓展","description":"","frontmatter":{},"headers":[],"relativePath":"workspace/Server/node/node-2.md","filePath":"workspace/Server/node/node-2.md","lastUpdated":1713971483000}'),p={name:"workspace/Server/node/node-2.md"},e=l(`<h1 id="nodejs-插件拓展" tabindex="-1">NodeJs 插件拓展 <a class="header-anchor" href="#nodejs-插件拓展" aria-label="Permalink to &quot;NodeJs 插件拓展&quot;">​</a></h1><h2 id="node-schedulenodejs定时任务" tabindex="-1">node-scheduleNodejs定时任务 <a class="header-anchor" href="#node-schedulenodejs定时任务" aria-label="Permalink to &quot;node-scheduleNodejs定时任务&quot;">​</a></h2><p><a href="https://github.com/node-schedule/node-schedule" target="_blank" rel="noreferrer">node-schedule</a> Nodejs定时任务</p><p><strong>安装</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E06C75;">yarn</span><span style="color:#E06C75;"> add</span><span style="color:#E06C75;"> node</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">schedule</span><span style="color:#56B6C2;"> -</span><span style="color:#E5C07B;">D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>使用</strong></p><h3 id="cron风格定时器" tabindex="-1">Cron风格定时器 <a class="header-anchor" href="#cron风格定时器" aria-label="Permalink to &quot;Cron风格定时器&quot;">​</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> scheduleCronstyle</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  schedule</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scheduleJob</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;1-59 * * * * *&#39;</span><span style="color:#ABB2BF;">, () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // sendEmail();</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">scheduleCronstyle</span><span style="color:#ABB2BF;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>6个占位符从左到右分别代表：<code>秒、分、时、日、月、周几</code></p><p><code>*</code>表示通配符，匹配任意，当秒是<code>*</code>时，表示任意秒数都触发，其它类推</p><p>下面可以看看以下传入参数分别代表的意思</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">每分钟的第59秒触发：</span><span style="color:#98C379;"> &#39;59 * * * * *&#39;</span></span>
<span class="line"><span style="color:#61AFEF;">每小时的1分59秒触发</span><span style="color:#98C379;"> ：&#39;59 1 * * * *&#39;</span></span>
<span class="line"><span style="color:#61AFEF;">每天的凌晨1点1分59秒触发</span><span style="color:#98C379;"> ：&#39;59 1 1 * * *&#39;</span></span>
<span class="line"><span style="color:#61AFEF;">每月的1日1点1分59秒触发</span><span style="color:#98C379;"> ：&#39;59 1 1 1 * *&#39;</span></span>
<span class="line"><span style="color:#61AFEF;">2020年的1月1日1点1分59秒触发</span><span style="color:#98C379;"> ：&#39;59 1 1 1 2020 *&#39;</span></span>
<span class="line"><span style="color:#61AFEF;">每周天的1点1分30秒触发</span><span style="color:#98C379;"> ：&#39;30 1 1 * * 0&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="基于日期的计划" tabindex="-1">基于日期的计划 <a class="header-anchor" href="#基于日期的计划" aria-label="Permalink to &quot;基于日期的计划&quot;">​</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> scheduleCronstyle</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> date</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2020</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">26</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">15</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> j</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> schedule</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scheduleJob</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">date</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;scheduleObjectLiteralSyntax:&#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="对象文本语法定时器" tabindex="-1">对象文本语法定时器 <a class="header-anchor" href="#对象文本语法定时器" aria-label="Permalink to &quot;对象文本语法定时器&quot;">​</a></h3><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#61AFEF;">second</span><span style="color:#ABB2BF;"> (0-59)</span></span>
<span class="line"><span style="color:#61AFEF;">minute</span><span style="color:#ABB2BF;"> (0-59)</span></span>
<span class="line"><span style="color:#61AFEF;">hour</span><span style="color:#ABB2BF;"> (0-23)</span></span>
<span class="line"><span style="color:#61AFEF;">date</span><span style="color:#ABB2BF;"> (1-31)</span></span>
<span class="line"><span style="color:#61AFEF;">month</span><span style="color:#ABB2BF;"> (0-11)</span></span>
<span class="line"><span style="color:#61AFEF;">year</span></span>
<span class="line"><span style="color:#61AFEF;">dayOfWeek</span><span style="color:#ABB2BF;"> (0-6) Starting with Sunday</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> scheduleCronstyle</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 周末的10点11分</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> j</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> schedule</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scheduleJob</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">hour</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">minute</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">dayOfWeek</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">}, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;hi 小哥明天该上班了啊:&#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="设置开始时间和结束时间" tabindex="-1">设置开始时间和结束时间 <a class="header-anchor" href="#设置开始时间和结束时间" aria-label="Permalink to &quot;设置开始时间和结束时间&quot;">​</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 5秒后运行，并在10秒后停止</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> startTime</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#D19A66;"> 5000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> endTime</span><span style="color:#56B6C2;"> =</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">startTime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getTime</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#D19A66;"> 5000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#E06C75;"> j</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> schedule</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scheduleJob</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">start</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">startTime</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">end</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">endTime</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">rule</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;*/1 * * * * *&#39;</span><span style="color:#ABB2BF;"> }, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Time for tea!&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="取消定时器" tabindex="-1">取消定时器 <a class="header-anchor" href="#取消定时器" aria-label="Permalink to &quot;取消定时器&quot;">​</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#61AFEF;"> scheduleCronstyle</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 周末的10点11分</span></span>
<span class="line"><span style="color:#C678DD;">  const</span><span style="color:#E5C07B;"> j</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> schedule</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scheduleJob</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">hour</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">minute</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">11</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">dayOfWeek</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">}, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;hi 小哥明天该上班了啊:&#39;</span><span style="color:#56B6C2;"> +</span><span style="color:#C678DD;"> new</span><span style="color:#61AFEF;"> Date</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">  setTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#E5C07B;">    console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;定时器取消&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 定时器取消</span></span>
<span class="line"><span style="color:#E5C07B;">    j</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">cancel</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }, </span><span style="color:#D19A66;">5000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>写在之后</strong></p><p>定时器功能大部分需求都可以借助<code>node-schedule</code>完成了，用它在项目中使用效果也不错，各种需求可以满足^_^!</p><h2 id="qrcode-terminal在终端输出二维码" tabindex="-1">qrcode-terminal在终端输出二维码 <a class="header-anchor" href="#qrcode-terminal在终端输出二维码" aria-label="Permalink to &quot;qrcode-terminal在终端输出二维码&quot;">​</a></h2><p><a href="https://github.com/gtanner/qrcode-terminal" target="_blank" rel="noreferrer">qrcode-terminal</a>在终端输出二维码</p><p><strong>安装</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E06C75;">yarn</span><span style="color:#E06C75;"> add</span><span style="color:#E06C75;"> qrcode</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">terminal</span><span style="color:#56B6C2;"> -</span><span style="color:#E5C07B;">D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>使用</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> qrcode</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;qrcode-terminal&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> url</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;http://www.wkdevhub.cn&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">qrcode</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">generate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 第二个参数 {small:true} 第三个参数是回调</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="node爬虫" tabindex="-1">node爬虫 <a class="header-anchor" href="#node爬虫" aria-label="Permalink to &quot;node爬虫&quot;">​</a></h2><h3 id="superagent-axios-node-fetch-请求数据" tabindex="-1">superagent / axios / node-fetch 请求数据 <a class="header-anchor" href="#superagent-axios-node-fetch-请求数据" aria-label="Permalink to &quot;superagent / axios / node-fetch  请求数据&quot;">​</a></h3><blockquote><p><strong>superagent</strong> 拓展性强，同时支持 Node.js 和浏览器，通过构建插件可以实现更多功能 ；缺点：其 API 不符合任何标准<br><strong>axios</strong> 支持 Promise API，同时支持 Node.js 和浏览器<br><strong>node-fetch</strong> 轻量级的模块,与window.fetchAPI 保持一致，在nodeJs中使用</p></blockquote><h3 id="cheerio" tabindex="-1">cheerio <a class="header-anchor" href="#cheerio" aria-label="Permalink to &quot;cheerio&quot;">​</a></h3><p><a href="https://cheerio.js.org/" target="_blank" rel="noreferrer">cheerio</a> 可以理解为一个Node.js版本的jquery</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> cheerio</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;cheerio&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">let</span><span style="color:#E06C75;"> $</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> cheerio</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">load</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&lt;div id=&#39;helloworld&#39;&gt;hello world&lt;/div&gt;&quot;</span><span style="color:#ABB2BF;">, {</span><span style="color:#E06C75;">ignoreWhitespace</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">...})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="选择器" tabindex="-1">选择器 <a class="header-anchor" href="#选择器" aria-label="Permalink to &quot;选择器&quot;">​</a></h4><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki one-dark-pro vp-code"><code><span class="line highlighted"><span style="color:#61AFEF;">//</span><span style="color:#98C379;"> 属性操作</span></span>
<span class="line"><span style="color:#61AFEF;">.attr(name,</span><span style="color:#98C379;"> value</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">.removeAtrr(name</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">.hasClass(className</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">.addClass(className</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">.remoteClass([className]</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#61AFEF;">//</span><span style="color:#98C379;"> 遍历</span></span>
<span class="line"><span style="color:#61AFEF;">.find(selector</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">.parent</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.next</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.prev</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.siblings</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.children(</span><span style="color:#98C379;"> selector</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#61AFEF;">.each(</span><span style="color:#98C379;"> function</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">index,</span><span style="color:#98C379;"> element</span><span style="color:#ABB2BF;">) )</span></span>
<span class="line"><span style="color:#61AFEF;">.map(</span><span style="color:#98C379;"> function</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">index,</span><span style="color:#98C379;"> element</span><span style="color:#ABB2BF;">) )</span></span>
<span class="line"><span style="color:#61AFEF;">.filter(</span><span style="color:#98C379;"> selector</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#61AFEF;">.filter(</span><span style="color:#98C379;"> function</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">index</span><span style="color:#ABB2BF;">) )</span></span>
<span class="line"><span style="color:#61AFEF;">.first</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.last</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.eq(i</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#61AFEF;">//</span><span style="color:#98C379;"> 操作DOM</span></span>
<span class="line"><span style="color:#61AFEF;">.append(</span><span style="color:#98C379;"> content,</span><span style="color:#ABB2BF;"> [content, </span><span style="color:#98C379;">...]</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#61AFEF;">.prepend(</span><span style="color:#98C379;"> content,</span><span style="color:#ABB2BF;"> [content, </span><span style="color:#98C379;">...]</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#61AFEF;">.after(</span><span style="color:#98C379;"> content,</span><span style="color:#ABB2BF;"> [content, </span><span style="color:#98C379;">...]</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#61AFEF;">.before(</span><span style="color:#98C379;"> content,</span><span style="color:#ABB2BF;"> [content, </span><span style="color:#98C379;">...]</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#61AFEF;">.remove(</span><span style="color:#ABB2BF;"> [selector] )</span></span>
<span class="line"><span style="color:#61AFEF;">.replaceWith(</span><span style="color:#98C379;"> content</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#61AFEF;">.empty</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.html(</span><span style="color:#ABB2BF;"> [htmlString] )</span></span>
<span class="line"><span style="color:#61AFEF;">.text(</span><span style="color:#ABB2BF;"> [textString] )</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#61AFEF;">//</span><span style="color:#98C379;"> 其他</span></span>
<span class="line"><span style="color:#61AFEF;">$.html</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#98C379;">$(</span><span style="color:#61AFEF;">&#39;ul&#39;</span><span style="color:#98C379;">)</span><span style="color:#61AFEF;">.text</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.toArray</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">.clone</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">$.root</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">$.contains(</span><span style="color:#98C379;"> container,</span><span style="color:#98C379;"> contained</span><span style="color:#ABB2BF;"> )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="iconv-lite" tabindex="-1">iconv-lite <a class="header-anchor" href="#iconv-lite" aria-label="Permalink to &quot;iconv-lite&quot;">​</a></h3><p>有些时候,获取到的数据是一些乱码,尤其是中文的情况.所以我们需要解决乱码的问题,<code>iconv-lite</code>模块就可以解决这一问题.</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#E06C75;">homeBody</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> iconv</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">decode</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">homeBody</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&quot;GBK&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//进行gbk解码</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果有乱码就在 <code>cheerio.load()</code>之前进行解码</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">meta</span><span style="color:#D19A66;font-style:italic;"> http-equiv</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;Content-Type&quot;</span><span style="color:#D19A66;font-style:italic;"> content</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text/html; charset=utf-8&quot;</span><span style="color:#ABB2BF;"> /&gt; </span><span style="color:#7F848E;font-style:italic;">//这里是utf-8,就不需要解码</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果是静态页面上面的操作基本上就已经完成了，但是现实中毕竟都是spa 大行其道很多都不是静态的，所以不能用 cheerio 模块来解析。</p><h3 id="动态页面爬取" tabindex="-1">动态页面爬取 <a class="header-anchor" href="#动态页面爬取" aria-label="Permalink to &quot;动态页面爬取&quot;">​</a></h3><ul><li><p><strong>手动复制body,用IDE或者node起服务进行爬取，人力成本比较高</strong></p></li><li><p><strong>找到数据接口,直接爬去</strong>，有的网页打开控制台全部是debug,并不能高效的找到对应的数据接口 <a href="https://blog.csdn.net/zhang6223284/article/details/80152368" target="_blank" rel="noreferrer">csdn</a></p></li><li><p><strong>最近刚看到的，<a href="https://github.com/puppeteer/puppeteer" target="_blank" rel="noreferrer">puppeteer</a></strong> <a href="https://zhaoqize.github.io/puppeteer-api-zh_CN/#?product=Puppeteer&amp;version=v3.0.1&amp;show=api-class-puppeteer" target="_blank" rel="noreferrer">文档链接</a></p></li><li><p><strong>phantomjs 跟上面的类似</strong></p></li></ul><h2 id="ora-控制台进度条" tabindex="-1">ora 控制台进度条 <a class="header-anchor" href="#ora-控制台进度条" aria-label="Permalink to &quot;ora 控制台进度条&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> ora</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;ora&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> spinner</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> ora</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;loading......&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;red&#39;</span><span style="color:#ABB2BF;">})</span></span>
<span class="line"><span style="color:#E5C07B;">spinner</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  spinner</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stop</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">}, </span><span style="color:#D19A66;">2000</span><span style="color:#ABB2BF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="yargs-命令行参数解析工具" tabindex="-1">yargs 命令行参数解析工具 <a class="header-anchor" href="#yargs-命令行参数解析工具" aria-label="Permalink to &quot;yargs 命令行参数解析工具&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> yargs</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;yargs&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">yargs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">argv</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// node yargs.js -f -l false  --force</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// { _: [</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="inquirer-终端命令行交互工具" tabindex="-1">inquirer 终端命令行交互工具 <a class="header-anchor" href="#inquirer-终端命令行交互工具" aria-label="Permalink to &quot;inquirer 终端命令行交互工具&quot;">​</a></h2><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> inquirer</span><span style="color:#56B6C2;"> =</span><span style="color:#61AFEF;"> require</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;inquirer&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E5C07B;">inquirer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">prompt</span><span style="color:#ABB2BF;">([{</span></span>
<span class="line"><span style="color:#E06C75;">  type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;checkbox&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// list、input、number、confirm、rawlist、expand、checkbox、password、editor</span></span>
<span class="line"><span style="color:#E06C75;">  choices</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;scss&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;ts&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;vuex&#39;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#E06C75;">  name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;type&#39;</span><span style="color:#ABB2BF;">,</span><span style="color:#7F848E;font-style:italic;">// 字段名</span></span>
<span class="line"><span style="color:#E06C75;">  message</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;添加项目功能&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">  default</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#ABB2BF;">}]).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">answers</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;结果为:&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">  console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">answers</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">添加项目功能 (Press &lt;</span><span style="color:#E06C75;">space</span><span style="color:#ABB2BF;">&gt; to select, &lt;</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">&gt; to toggle all, &lt;</span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;">&gt; to invert selection, and &lt;</span><span style="color:#E06C75;">enter</span><span style="color:#ABB2BF;">&gt; to proceed)</span></span>
<span class="line"><span style="color:#ABB2BF;">❯◯ scss</span></span>
<span class="line"><span style="color:#ABB2BF;"> ◉ ts</span></span>
<span class="line"><span style="color:#ABB2BF;"> ◉ vuex</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>`,52),o=[e];function r(c,t,i,B,y,d){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{b as __pageData,u as default};
