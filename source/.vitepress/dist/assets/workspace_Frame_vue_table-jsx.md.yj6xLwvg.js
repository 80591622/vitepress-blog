import{_ as s,c as n,o as a,a5 as l}from"./chunks/framework.BQQWXjGs.js";const A=JSON.parse('{"title":"vue之JSX封装table","description":"","frontmatter":{},"headers":[],"relativePath":"workspace/Frame/vue/table-jsx.md","filePath":"workspace/Frame/vue/table-jsx.md","lastUpdated":1713942612000}'),p={name:"workspace/Frame/vue/table-jsx.md"},e=l(`<h1 id="vue之jsx封装table" tabindex="-1">vue之JSX封装table <a class="header-anchor" href="#vue之jsx封装table" aria-label="Permalink to &quot;vue之JSX封装table&quot;">​</a></h1><p><a href="https://cn.vuejs.org/v2/guide/render-function.html#%E6%B7%B1%E5%85%A5%E6%95%B0%E6%8D%AE%E5%AF%B9%E8%B1%A1" target="_blank" rel="noreferrer">封装之前先看下</a></p><p><a href="https://github.com/vuejs/babel-plugin-transform-vue-jsx" target="_blank" rel="noreferrer">babel-plugin-transform-vue-jsx</a></p><p>基于ElementUI的table二次封装</p><p>最近搞中台开发，用的ElementUI的Table组件比较多，几乎每个页面都用，相比react的antd,饿了么的table就相对臃肿了，可能是因为框架的原因吧。</p><p>本次封装用的jsx语法，vue模板拓展性不是特别显优势，没有jsx灵活。<a href="/workspace/Frame/vue/jsx.html">想看jsx在vue中怎么使用的请转看下之前的文章</a></p><h2 id="组件封装源码" tabindex="-1">组件封装源码 <a class="header-anchor" href="#组件封装源码" aria-label="Permalink to &quot;组件封装源码&quot;">​</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//EnhanceTable.jsx</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#E06C75;"> table</span><span style="color:#C678DD;"> from</span><span style="color:#98C379;"> &quot;../mixins/table&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">  mixins</span><span style="color:#ABB2BF;">: [</span><span style="color:#E06C75;">table</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#E06C75;">  props</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">    otherTableParams</span><span style="color:#ABB2BF;">: { </span><span style="color:#7F848E;font-style:italic;">// 设置table其他参数</span></span>
<span class="line"><span style="color:#E06C75;">      type</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Object</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">       default</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#ABB2BF;"> {}; </span><span style="color:#7F848E;font-style:italic;">// Object/Array的属性必须使用函数返回默认值  箭头函数不行</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    otherPaginationParams</span><span style="color:#ABB2BF;">: { </span><span style="color:#7F848E;font-style:italic;">// 设置分页其他参数</span></span>
<span class="line"><span style="color:#E06C75;">      type</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Object</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">       default</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#ABB2BF;"> {};</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    tableColumn</span><span style="color:#ABB2BF;">: { </span><span style="color:#7F848E;font-style:italic;">// table的column</span></span>
<span class="line"><span style="color:#E06C75;">      type</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Array</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">       default</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#C678DD;">        return</span><span style="color:#ABB2BF;"> [];</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    multiple</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">      type</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">Boolean</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">      default</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#E06C75;">  methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">    handleButtons</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">record</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 处理操作部分按钮 -&gt; 可以在外面自定义，必须是jsx</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">handleButtons</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">handleButtons</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">record</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">      return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#56B6C2;">        !!</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">list</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">list</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">          return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E5C07B;">el-button</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">              disabled</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">disabled</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">              key</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">title</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">              type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text&quot;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">              size</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;small&quot;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">              style</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">styles</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">              onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">cb</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">record</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">            &gt;</span></span>
<span class="line"><span style="color:#C678DD;">              {</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">title</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;/</span><span style="color:#E5C07B;">el-button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          )</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      );</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // handleCurrentChange(val) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    //   this.$emit(&#39;currentChange&#39;, val);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // },</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#61AFEF;">  mounted</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#61AFEF;">  render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">    const</span><span style="color:#ABB2BF;"> {</span><span style="color:#E5C07B;">tableOptions</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">paginationOptionsMethod</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">tableOptionsMethod</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">otherTableParams</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">tableColumn</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">multiple</span><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">el-table</span></span>
<span class="line"><span style="color:#C678DD;">          {</span><span style="color:#ABB2BF;">...{</span></span>
<span class="line"><span style="color:#E06C75;">            props</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">              ...</span><span style="color:#E06C75;">tableOptions</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">              ...</span><span style="color:#E5C07B;">otherTableParams</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"><span style="color:#E06C75;">            on</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">              ...</span><span style="color:#E06C75;">tableOptionsMethod</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">              ...</span><span style="color:#E5C07B;">otherTableParams</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">on</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">        &gt;</span></span>
<span class="line"><span style="color:#C678DD;">          {</span><span style="color:#7F848E;font-style:italic;">/* table多选 */</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#C678DD;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            multiple</span><span style="color:#56B6C2;"> &amp;&amp;</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">              &lt;</span><span style="color:#E5C07B;">el-table-column</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;selection&quot;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;55&quot;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                fixed</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#98C379;">&#39;left&#39;</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">              /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            )</span></span>
<span class="line"><span style="color:#C678DD;">          }</span></span>
<span class="line"><span style="color:#C678DD;">          {</span><span style="color:#7F848E;font-style:italic;">/* table列表 */</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#C678DD;">          {</span></span>
<span class="line"><span style="color:#E5C07B;">            tableColumn</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">item</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">              if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">type</span><span style="color:#56B6C2;"> ===</span><span style="color:#98C379;"> &#39;button&#39;</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                // 操作部分</span></span>
<span class="line"><span style="color:#C678DD;">                return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">                  &lt;</span><span style="color:#E5C07B;">el-table-column</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                    label</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">label</span><span style="color:#56B6C2;"> ||</span><span style="color:#98C379;"> &#39;操作&#39;</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                    width</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">width</span><span style="color:#56B6C2;"> ||</span><span style="color:#98C379;"> &#39;88&#39;</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                    fixed</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">fixed</span><span style="color:#56B6C2;"> ||</span><span style="color:#98C379;"> &#39;right&#39;</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#C678DD;">                    {</span><span style="color:#ABB2BF;">...{</span></span>
<span class="line"><span style="color:#E06C75;">                      scopedSlots</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">                        default</span><span style="color:#ABB2BF;">: ({</span><span style="color:#E06C75;font-style:italic;">row</span><span style="color:#ABB2BF;">}) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                          return</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">handleButtons</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">item</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">row</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                        }</span></span>
<span class="line"><span style="color:#ABB2BF;">                      }</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">                  /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                )</span></span>
<span class="line"><span style="color:#ABB2BF;">              }</span></span>
<span class="line"><span style="color:#C678DD;">              return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;</span><span style="color:#E5C07B;">el-table-column</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                  props</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">item</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                  key</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prop</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#C678DD;">                  {</span><span style="color:#ABB2BF;">...{</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                    // 自定义的渲染方式，拓展性</span></span>
<span class="line"><span style="color:#E06C75;">                    scopedSlots</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">                      default</span><span style="color:#ABB2BF;">: ({</span><span style="color:#E06C75;font-style:italic;">row</span><span style="color:#ABB2BF;">}) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">                        return</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">render</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> item</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">row</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">], </span><span style="color:#E06C75;">row</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> row</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">item</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">                      }</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                  }</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">                /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">              )</span></span>
<span class="line"><span style="color:#ABB2BF;">            })</span></span>
<span class="line"><span style="color:#C678DD;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E5C07B;">el-table</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">        {</span><span style="color:#7F848E;font-style:italic;">/*分页*/</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">el-pagination</span></span>
<span class="line"><span style="color:#C678DD;">          {</span><span style="color:#ABB2BF;">...{</span></span>
<span class="line"><span style="color:#E06C75;">            class</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">,  </span><span style="color:#7F848E;font-style:italic;">// 支持拓展</span></span>
<span class="line"><span style="color:#E06C75;">            props</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">              ...</span><span style="color:#E06C75;">paginationOptions</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"><span style="color:#E06C75;">            on</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">              ...</span><span style="color:#E06C75;">paginationOptionsMethod</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">        /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br></div></div><h2 id="enhancetable-文档" tabindex="-1">EnhanceTable 文档 <a class="header-anchor" href="#enhancetable-文档" aria-label="Permalink to &quot;EnhanceTable 文档&quot;">​</a></h2><h3 id="组件使用" tabindex="-1">组件使用 <a class="header-anchor" href="#组件使用" aria-label="Permalink to &quot;组件使用&quot;">​</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">enhance-table</span><span style="color:#D19A66;font-style:italic;"> ref</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;table&quot;</span><span style="color:#FFFFFF;"> :multiple=&quot;true&quot;</span><span style="color:#FFFFFF;"> :otherTableParams=&quot;otherTableParams&quot;</span><span style="color:#FFFFFF;"> :tableColumn=&quot;column&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  import EnhanceTable from &quot;../components/EnhanceTable&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  export default </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#61AFEF;">    data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      return {</span></span>
<span class="line"><span style="color:#E06C75;">        otherTableParams</span><span style="color:#ABB2BF;">: {</span><span style="color:#7F848E;font-style:italic;">// table的参数</span></span>
<span class="line"><span style="color:#E06C75;">          props</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">            border</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            stripe</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            size</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;small&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">            &#39;default-sort&#39;</span><span style="color:#ABB2BF;">: {</span><span style="color:#E06C75;">prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;createTime&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">order</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;ascending&#39;</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#E06C75;">        otherPaginationParams</span><span style="color:#ABB2BF;">:{},</span><span style="color:#7F848E;font-style:italic;">// 分页的参数</span></span>
<span class="line"><span style="color:#E06C75;">        column</span><span style="color:#ABB2BF;">: [  </span><span style="color:#7F848E;font-style:italic;">// table的列</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;roleId&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;序号&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            width</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;roleName&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;角色名称&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">            &#39;width&#39;</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;110&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;createTime&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;创建时间&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            sortable</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;roleName&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;角色名称&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            //formatter  完全可以用render代替</span></span>
<span class="line"><span style="color:#61AFEF;">            render</span><span style="color:#ABB2BF;">: (</span><span style="color:#E06C75;font-style:italic;">text</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">record</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> { </span><span style="color:#7F848E;font-style:italic;">// 当前行的值，当前行数据</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">              // console.log(record);</span></span>
<span class="line"><span style="color:#C678DD;">              return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">h4</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">text</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h4</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          { </span><span style="color:#7F848E;font-style:italic;">// 最后的操作列，可根据list里面展示要操作的按钮，和回调</span></span>
<span class="line"><span style="color:#E06C75;">            type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;button&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            width</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;118&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;设置&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            list</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">              {</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;查看&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">disabled</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">styles</span><span style="color:#ABB2BF;">: {</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;#777&#39;</span><span style="color:#ABB2BF;">}, </span><span style="color:#E06C75;">cb</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">seeHandle</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#ABB2BF;">              {</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;编辑&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">cb</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">editHandle</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">            ],</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // handleButtons: () =&gt; (&lt;div&gt;111&lt;/div&gt;)  // 自定义的内容</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        ]</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    components</span><span style="color:#ABB2BF;">: {</span><span style="color:#E06C75;">EnhanceTable</span><span style="color:#ABB2BF;">},</span></span>
<span class="line"><span style="color:#E06C75;">    methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#61AFEF;">      queryList</span><span style="color:#ABB2BF;">() { </span><span style="color:#7F848E;font-style:italic;">// 子组件默认的请求名称</span></span>
<span class="line"><span style="color:#E5C07B;">        this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$nextTick</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {  </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">          // 因为当前算是父组件，当执行到父组件的created周期才会执行它的子组件，所以这个时候子组件的data的一些方法获取不到，或者可以在mounted周期里面执行异步请求</span></span>
<span class="line"><span style="color:#C678DD;">          const</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">paginationOptions</span><span style="color:#ABB2BF;">: {</span><span style="color:#E5C07B;">pageSize</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">currentPage</span><span style="color:#ABB2BF;">}, </span><span style="color:#E5C07B;">handlePageData</span><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">=</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$refs</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">table</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">// 获取子组件mixins里面的参数</span></span>
<span class="line"><span style="color:#C678DD;">          const</span><span style="color:#ABB2BF;"> {</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">: {</span><span style="color:#E5C07B;">items</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">page</span><span style="color:#ABB2BF;">: {</span><span style="color:#E5C07B;">totalRecord</span><span style="color:#ABB2BF;">}}} </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">          await</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$fetch</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">\`http://xx..xx/role?pageSize=</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">pageSize</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">&amp;pageNum=</span><span style="color:#C678DD;">\${</span><span style="color:#E06C75;">currentPage</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">\`</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">            headers</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">              Authentication</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;xxxxx&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">            },</span></span>
<span class="line"><span style="color:#ABB2BF;">          });</span></span>
<span class="line"><span style="color:#61AFEF;">          handlePageData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">items</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">totalRecord</span><span style="color:#ABB2BF;">);  </span><span style="color:#7F848E;font-style:italic;">// mixin里面统一处理</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#61AFEF;">      editHandle</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">        console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">options</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;编辑&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#61AFEF;">      seeHandle</span><span style="color:#ABB2BF;">(...</span><span style="color:#E06C75;font-style:italic;">options</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">        console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">options</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;查看&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#61AFEF;">    created</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      this.queryList();</span><span style="color:#7F848E;font-style:italic;">//必须是这个名称 </span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#61AFEF;">    mounted</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;font-style:italic;"> type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text/scss&quot;</span><span style="color:#D19A66;font-style:italic;"> lang</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;scss&quot;</span><span style="color:#D19A66;font-style:italic;"> scoped</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br></div></div><h2 id="最后在送一个当前使用的mixins" tabindex="-1">最后在送一个当前使用的mixins <a class="header-anchor" href="#最后在送一个当前使用的mixins" aria-label="Permalink to &quot;最后在送一个当前使用的mixins&quot;">​</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// table.mixins.js</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#E5C07B;"> table</span><span style="color:#56B6C2;"> =</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">  data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">    return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E06C75;">      tableOptions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">        data</span><span style="color:#ABB2BF;">: [], </span><span style="color:#7F848E;font-style:italic;">// 列表数据</span></span>
<span class="line"><span style="color:#E06C75;">        border</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 带边框</span></span>
<span class="line"><span style="color:#E06C75;">        style</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;width: 100%&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        size</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;small&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        multipleSelection</span><span style="color:#ABB2BF;">: [], </span><span style="color:#7F848E;font-style:italic;">// 列表多选</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#E06C75;">      tableOptionsMethod</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#98C379;">        &quot;selection-change&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">handleSelectionChange</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#E06C75;">      paginationOptions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">        class</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;fyDiv&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        background</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 带有背景色</span></span>
<span class="line"><span style="color:#E06C75;">        layout</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;total, sizes, prev, pager, next&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        pageSizes</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">40</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#E06C75;">        total</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 应用列表总数量</span></span>
<span class="line"><span style="color:#E06C75;">        pageSize</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 当前分页数量</span></span>
<span class="line"><span style="color:#E06C75;">        currentPage</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 当前页数第一页</span></span>
<span class="line"><span style="color:#E06C75;">        showPage</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// 是否显示分页组件,必须total总数也要小于当前要展示的页数</span></span>
<span class="line"><span style="color:#ABB2BF;">      },</span></span>
<span class="line"><span style="color:#E06C75;">      paginationOptionsMethod</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#98C379;">        &quot;size-change&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">handleSizeChange</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#98C379;">        &quot;current-change&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">handleCurrentChange</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#E06C75;">  methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 获取数据回调处理分页和data</span></span>
<span class="line"><span style="color:#61AFEF;">    handlePageData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">total</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tableOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> data</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      // 如果还有下一页，则显示分页插件</span></span>
<span class="line"><span style="color:#C678DD;">      if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">total</span><span style="color:#56B6C2;"> &gt;</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">        this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">showPage</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">        this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">showPage</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">        this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentPage</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">        this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pageSize</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">total</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> total</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 选项变化</span></span>
<span class="line"><span style="color:#61AFEF;">    handleSelectionChange</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">multipleSelection</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">multipleSelection</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;选中&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tableOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">multipleSelection</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> multipleSelection</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 改变页数</span></span>
<span class="line"><span style="color:#61AFEF;">    handleCurrentChange</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">currentPage</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentPage</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> currentPage</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">queryList</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$parent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 选择页数</span></span>
<span class="line"><span style="color:#61AFEF;">    handleSizeChange</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">currentSize</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pageSize</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> currentSize</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentPage</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">queryList</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$parent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    // 搜索专用</span></span>
<span class="line"><span style="color:#61AFEF;">    handleSearchChange</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">page</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">size</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> 10</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">pageSize</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> size</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">paginationOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">currentPage</span><span style="color:#56B6C2;"> =</span><span style="color:#E06C75;"> page</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">      this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">queryList</span><span style="color:#C678DD;"> ?</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$parent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">queryList</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#C678DD;"> default</span><span style="color:#E06C75;"> table</span><span style="color:#ABB2BF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><h2 id="写在最后" tabindex="-1">写在最后 <a class="header-anchor" href="#写在最后" aria-label="Permalink to &quot;写在最后&quot;">​</a></h2><p>当前的table组件是针对自己项目的需求封装，兼容了饿了么table大部分的业务场景，随着后期的业务拓展，当前的组件的拓展性也会增强，封装路漫漫，一点点完善吧。</p>`,15),o=[e];function r(t,c,B,y,i,b){return a(),n("div",null,o)}const u=s(p,[["render",r]]);export{A as __pageData,u as default};
