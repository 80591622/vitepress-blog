import{_ as s,c as n,o as a,a5 as l}from"./chunks/framework.BQQWXjGs.js";const u=JSON.parse('{"title":"Element-UI","description":"","frontmatter":{},"headers":[],"relativePath":"workspace/Frame/vue/sortable.md","filePath":"workspace/Frame/vue/sortable.md","lastUpdated":1713942612000}'),p={name:"workspace/Frame/vue/sortable.md"},e=l(`<h1 id="element-ui" tabindex="-1">Element-UI <a class="header-anchor" href="#element-ui" aria-label="Permalink to &quot;Element-UI&quot;">​</a></h1><h2 id="table组件实现拖拽效果" tabindex="-1">Table组件实现拖拽效果 <a class="header-anchor" href="#table组件实现拖拽效果" aria-label="Permalink to &quot;Table组件实现拖拽效果&quot;">​</a></h2><p>最近业务需求要添加table的拖拽，但是element并没有table的拖拽功能，只能自己添加了。</p><p>找了两个组价库<code>sortablejs</code>和<code>vuedraggable</code>,后者是基于前者实现的更加符合vue标准的库，依赖于前者，但是项目中用的element的table, <code>vuedraggable</code>在这个基础上就不能使用，看<a href="https://github.com/SortableJS/Vue.Draggable/blob/master/example/components/table-example.vue" target="_blank" rel="noreferrer">官方的示例</a> , 所以只能使用<code>sortablejs</code>了，我直接安装了<code>vuedraggable</code>，它依赖<code>sortablejs</code>可以直接使用里面的特性，万一后期再有其他拖拽的功能，这个库上手还比较方便。</p><h2 id="sortable使用示例" tabindex="-1">Sortable使用示例 <a class="header-anchor" href="#sortable使用示例" aria-label="Permalink to &quot;Sortable使用示例&quot;">​</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">el-card</span><span style="color:#D19A66;font-style:italic;"> v-loading</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;fullscreenLoading&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">el-table</span></span>
<span class="line"><span style="color:#FFFFFF;">                :data=&quot;tableOptions.data&quot;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                border</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                size</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;small&quot;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                row-key</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;roleId&#39;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                ref</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;table&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                @cell-mouse-enter.once=&#39;rowDrop&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E5C07B;">el-table-column</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                    prop</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;sort&quot;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                    label</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;拖拽区域&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;</span><span style="color:#E06C75;">template</span><span style="color:#D19A66;font-style:italic;"> slot-scope</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;scope&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                    &lt;</span><span style="color:#E5C07B;">el-button</span><span style="color:#D19A66;font-style:italic;"> type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#D19A66;font-style:italic;"> size</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;small&quot;</span><span style="color:#D19A66;font-style:italic;"> class</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;handle&quot;</span><span style="color:#ABB2BF;">&gt;按住拖拽&lt;/</span><span style="color:#E5C07B;">el-button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;/</span><span style="color:#E5C07B;">el-table-column</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E5C07B;">el-table-column</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                    v-for</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;item of column&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                    :key=&quot;item.prop&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                    :prop=&quot;item.prop&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                    :label=&quot;item.label&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                    :width=&quot;item.width&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                    :fixed=&quot;item.fixed&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E5C07B;">el-table</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">el-pagination</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">                background</span></span>
<span class="line"><span style="color:#FFFFFF;">                :hide-on-single-page=&quot;paginationOptions.showPage&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                :layout=&quot;paginationOptions.layout&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                :page-sizes=&quot;paginationOptions.pageSizes&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                :total=&quot;paginationOptions.total&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                :page-size=&quot;paginationOptions.pageSize&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                :current-page=&quot;paginationOptions.currentPage&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                @size-change=&quot;handleSizeChange&quot;</span></span>
<span class="line"><span style="color:#FFFFFF;">                @current-change=&quot;handleCurrentChange&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E5C07B;">el-card</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  import Sortable from &#39;sortablejs&#39;;</span></span>
<span class="line"><span style="color:#ABB2BF;">  import table from &quot;@/mixins/table&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  export default </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">    name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;TableDraggable&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">    mixins</span><span style="color:#ABB2BF;">: [</span><span style="color:#E06C75;">table</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#E06C75;">    props</span><span style="color:#ABB2BF;">: {},</span></span>
<span class="line"><span style="color:#61AFEF;">    data</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      return {</span></span>
<span class="line"><span style="color:#E06C75;">        column</span><span style="color:#ABB2BF;">: [</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;roleId&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;序号&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            width</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;roleName&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;角色名称&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;createTime&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;创建时间&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;roleId&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;序号&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            width</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">          {</span></span>
<span class="line"><span style="color:#E06C75;">            prop</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;edit&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            label</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;编辑&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            width</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">180</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">            fixed</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;right&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">        ],</span></span>
<span class="line"><span style="color:#E06C75;">        fullscreenLoading</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">        paginationOptions</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">          pageSizes</span><span style="color:#ABB2BF;">: [</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">40</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    watch</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#98C379;">      &#39;tableOptions.data&#39;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#E06C75;">        deep</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">        handler</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">newData</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">          // console.log(newData);  // 可以发现每次拖拽后数据发生了改变</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    },</span></span>
<span class="line"><span style="color:#E06C75;">    methods</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">      //行拖拽</span></span>
<span class="line"><span style="color:#61AFEF;">      rowDrop</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#C678DD;">        const</span><span style="color:#E5C07B;"> tbody</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$refs</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">table</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">$el</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">querySelector</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;.el-table__body-wrapper tbody&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">        const</span><span style="color:#E5C07B;"> _this</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">        Sortable</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">tbody</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#E06C75;">          handle</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;.handle&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#E06C75;">          animation</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">150</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#61AFEF;">          onChoose</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            //选择元素</span></span>
<span class="line"><span style="color:#E5C07B;">            _this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">column</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">_this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">column</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">fixed</span><span style="color:#56B6C2;"> =</span><span style="color:#D19A66;"> false</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#61AFEF;">          onUnchoose</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">evt</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // 取消选择元素</span></span>
<span class="line"><span style="color:#E5C07B;">            _this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">column</span><span style="color:#ABB2BF;">[</span><span style="color:#E5C07B;">_this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">column</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#56B6C2;"> -</span><span style="color:#D19A66;"> 1</span><span style="color:#ABB2BF;">].</span><span style="color:#E06C75;">fixed</span><span style="color:#56B6C2;"> =</span><span style="color:#98C379;"> &#39;right&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#61AFEF;">          onEnd</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;font-style:italic;">newIndex</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">oldIndex</span><span style="color:#ABB2BF;">}) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">            // 拖拽完成</span></span>
<span class="line"><span style="color:#C678DD;">            const</span><span style="color:#E5C07B;"> currRow</span><span style="color:#56B6C2;"> =</span><span style="color:#E5C07B;"> _this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tableOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">oldIndex</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#E5C07B;">            _this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">tableOptions</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splice</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newIndex</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">currRow</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#C678DD;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">style</span><span style="color:#D19A66;font-style:italic;"> type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text/scss&quot;</span><span style="color:#D19A66;font-style:italic;"> lang</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;scss&quot;</span><span style="color:#D19A66;font-style:italic;"> scoped</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    .handle </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">        cursor</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">move</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    ::v-deep .hover-row &gt; td </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#E06C75;">        background</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: #</span><span style="color:#E06C75;">fff</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">important</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    ::v-deep .sortable-chosen &gt; td </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // 拖动的样式</span></span>
<span class="line"><span style="color:#E06C75;">        background</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: #</span><span style="color:#E06C75;">eff2f6</span><span style="color:#56B6C2;"> !</span><span style="color:#E06C75;">important</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    ::v-deep .el-table--enable-row-hover .el-table__body tr:hover &gt; td </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        // 修复拖拽的时候hover的不消失的问题</span></span>
<span class="line"><span style="color:#E06C75;">        background</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: #</span><span style="color:#E06C75;">fff</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br></div></div><p><strong>上面的代码有一些注意的地方我一一列举下来</strong></p><ol><li>element table务必指定<code>row-key</code>，row-key必须是唯一的，不然会出现排序不对的情况。</li><li>我在table里面使用了<strong>fixed</strong>，最后一列是固定在右侧，用过element的知道这是两个table的拼接成的，所以拖拽是没有反应的 <ol><li>以因为上面我们有指定row-key，所以拖拽后不会出现错位的情况，但是在拖拽的时候，是有很明显的错位出现。</li><li>我解决的思路是在拖拽的时候先把这个固定取消<code>onChoose</code>,然后拖拽完成后在把固定加上<code>onUnchoose</code>,具体看两个方法的代码</li></ol></li><li>样式table会有鼠标滑过的效果，但是使用拖拽后，鼠标滑过后的效果不消失，甚至会出现很多个鼠标滑过的效果，解决的方式比较粗暴，我是把所有的滑过的效果全部取消了，谁有更好的方案欢迎评论区留言。 <ol><li>不使用<code>fixed</code>,可以防止2、3问题</li></ol></li><li><code>mounted</code>生命周期调取的<code>rowDrop</code>方法，会出现的问题是，如果在<code>created</code>调取的接口量大在<code>mounted</code>周期可能不能更好的渲染完成，此时将获取不到<code>tbody</code>,所以这里我的解决办法就是使用,table组件自带的<code>@cell-mouse-enter.once=&#39;rowDrop&#39;</code>，hover滑过的时候完成初始化，加上once是他只需要执行一次，或者更粗暴的办法直接使用定时器。</li></ol><h2 id="参考文档" tabindex="-1">参考文档 <a class="header-anchor" href="#参考文档" aria-label="Permalink to &quot;参考文档&quot;">​</a></h2><p><a href="https://sortablejs.github.io/Vue.Draggable/#/table-example" target="_blank" rel="noreferrer">draggable</a></p><p><a href="https://github.com/SortableJS/Sortable" target="_blank" rel="noreferrer">sortable</a></p>`,11),o=[e];function r(t,c,B,i,y,b){return a(),n("div",null,o)}const A=s(p,[["render",r]]);export{u as __pageData,A as default};
