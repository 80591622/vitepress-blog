
# Vueé¢„æ¸²æŸ“
## SSR

ä¹‹å‰ä¸€æ®µæ—¶é—´è°ƒç ”äº†Reactçš„[SSR](https://juejin.im/post/6854573205349367815),ä»Šå¤©æœ‰æ—¶é—´ç ”ç©¶ä¸‹Vueçš„é¢„æ¸²æŸ“ã€‚è€å¥—è·¯è¿˜æ˜¯å…ˆè¯´è¯´é¢„æ¸²æŸ“æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œè·ŸSSRæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ  Let's look down  ğŸ‘“â¬



å¦‚æœä½ è°ƒç ”æœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR) åªæ˜¯ç”¨æ¥æ”¹å–„å°‘æ•°è¥é”€é¡µé¢ï¼ˆä¾‹å¦‚ `/`, `/about`, `/contact` ç­‰ï¼‰çš„ SEOï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦**é¢„æ¸²æŸ“**ã€‚æ— éœ€ä½¿ç”¨ web æœåŠ¡å™¨å®æ—¶åŠ¨æ€ç¼–è¯‘ HTMLï¼Œè€Œæ˜¯ä½¿ç”¨é¢„æ¸²æŸ“æ–¹å¼ï¼Œåœ¨æ„å»ºæ—¶ (build time) ç®€å•åœ°ç”Ÿæˆé’ˆå¯¹ç‰¹å®šè·¯ç”±çš„é™æ€ HTML æ–‡ä»¶ã€‚ä¼˜ç‚¹æ˜¯è®¾ç½®é¢„æ¸²æŸ“æ›´ç®€å•ï¼Œå¹¶å¯ä»¥å°†ä½ çš„å‰ç«¯ä½œä¸ºä¸€ä¸ªå®Œå…¨é™æ€çš„ç«™ç‚¹ã€‚



é¢„æ¸²æŸ“æ˜¯ä¸ºäº†é¡µé¢æœ‰æ›´å¥½çš„åŠ è½½é€Ÿåº¦ï¼Œè€Œä¸”å¯ä»¥æ”¹å–„å°‘æ•°é¡µé¢çš„SEOï¼Œä¸ºä»€ä¹ˆæ˜¯å°‘æ•°çš„ï¼Œå› ä¸ºå¤§é‡çš„è·¯ç”±ä¼šä½¿é¢„æ¸²æŸ“å˜å¾—éå¸¸ç¼“æ…¢ï¼ˆæ„å»ºæ—¶ï¼‰ã€‚é¢„æ¸²æŸ“åŸºæœ¬åŸç†æ˜¯ - å¯åŠ¨æ— å¤´æµè§ˆå™¨ï¼ŒåŠ è½½åº”ç”¨ç¨‹åºçš„è·¯ç”±å¹¶å°†ç»“æœä¿å­˜åˆ°é™æ€HTMLæ–‡ä»¶ä¸­ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥å°†å…¶ä¸ä»¥å‰ä½¿ç”¨çš„ä»»ä½•é™æ€æ–‡ä»¶æœåŠ¡è§£å†³æ–¹æ¡ˆä¸€èµ·ä½¿ç”¨ï¼Œç”¨æœ€å°‘çš„ä»£ç åšåˆ°ä½ æƒ³è¦çš„æ•ˆæœå‡ ä¹æ²¡æœ‰ä»»ä½•çš„ä¾µå…¥æ€§ã€‚



çœ‹ä¸‹ä»–ä»¬çš„åŒºåˆ«ï¼š

| [SSR](https://juejin.im/post/6854573205349367815) | [é¢„æ¸²æŸ“](https://www.npmjs.com/package/prerender-spa-plugin) |
| :------------------------------------------------- | :----------------------------------------------------------- |
| è¿è¡Œæ—¶ | æ„å»ºæ—¶  |
| ä»£ç ä¾µå…¥æ€§å¤§ï¼Œå¼€å‘è°ƒè¯•ä»£ä»·é«˜ï¼ŒæŠ¥é”™ä¸æ˜æ˜¾ï¼ˆé’©å­ï¼‰  | å‡ ä¹æ²¡æœ‰ä¾µå…¥æ€§                                               |
| SEOæ›´å½»åº•                                         | æœ‰å±€é™æ€§ï¼ˆåŠ¨æ€URLçš„å¼‚æ­¥è¯·æ±‚ï¼‰                                |
| é¦–å±åŠ è½½æ›´å¿«                                      | é¦–å±åŠ è½½å¿«                                                   |
| éœ€è¦Nodeç¯å¢ƒï¼Œè€—è´¹CPUå†…å­˜                         | ä¸éœ€è¦Nodeç¯å¢ƒ                                               |
| éš¾åº¦è¾ƒå¤§ï¼ˆæœ‰ç°æˆçš„æ¡†æ¶ï¼‰                          | éš¾åº¦å°                                                       |
| åŠ¨æ€å†…å®¹ç›´å‡º HTMl                                 | ç›´å‡ºæœ‰é™ï¼Œå®¢æˆ·ç«¯ä¼šå†æ¬¡åŠ è½½ï¼ˆè·³å±ï¼‰                           |



## ä¸Šå¹²è´§



é¢„æ¸²æŸ“æ ¸å¿ƒæ’ä»¶ï¼š**prerender-spa-plugin** ä¸ºäº†æ›´å¥½çš„SEOä¸€èˆ¬ä¼šåŠ¨æ€éœ€æ”¹metaçš„å†…å®¹ **vue-meta-info**

å®‰è£…ï¼š

```bash
yarn add prerender-spa-plugin vue-meta-info -D
```

prerender-spa-plugin æ˜¯åŸºäºpuppeteerçš„ï¼Œä¸‹è½½å‡ºé”™å¤šè¯•å‡ æ¬¡ï¼Œç™¾åº¦å¾ˆå¤šæ–‡ç« å¯è§£å†³



**vue.config.jsä¸­è¿›è¡Œé…ç½®**



```javascript
const PrerenderSPAPlugin = require('prerender-spa-plugin')
const Renderer = PrerenderSPAPlugin.PuppeteerRenderer

module.exports = {
  configureWebpack: {
    plugins: [
       new PrerenderSPAPlugin({
          // ç”Ÿæˆæ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™ä¸ªç›®å½•åªèƒ½æœ‰ä¸€çº§ã€‚è‹¥ç›®å½•å±‚æ¬¡å¤§äºä¸€çº§ï¼Œåœ¨ç”Ÿæˆçš„æ—¶å€™ä¸ä¼šæœ‰ä»»ä½•é”™è¯¯æç¤ºï¼Œåœ¨é¢„æ¸²æŸ“çš„æ—¶å€™åªä¼šå¡ç€ä¸åŠ¨
          staticDir: path.join(__dirname, './dist'),
          // å¯é€‰-æ¸²æŸ“çš„åº”ç”¨ç¨‹åºåº”è¾“å‡ºåˆ°çš„è·¯å¾„ã€‚
          // (é»˜è®¤ä¸ºstaticDirã€‚ï¼‰
          outputDir: path.joinï¼ˆ__dirname ï¼Œ'/dist/prerendered'ï¼‰ï¼Œ 
          // å¯¹åº”è‡ªå·±çš„è·¯ç”±æ–‡ä»¶
          routes: [ '/', '/home','/list'],
          // è‹¥æ²¡æœ‰è¿™æ®µåˆ™ä¸ä¼šè¿›è¡Œé¢„ç¼–è¯‘
          renderer: new Renderer({
            inject: {
              foo: 'bar'
            },
            // headless: false,
            // åœ¨ main.js ä¸­ document.dispatchEvent(new Event('render-event'))ï¼Œä¸¤è€…çš„äº‹ä»¶åç§°è¦å¯¹åº”ä¸Šã€‚
            renderAfterDocumentEvent: 'render-event',
            // å¯é€‰-ç­‰å¾…æ¸²æŸ“ï¼Œç›´åˆ°ç»è¿‡ä¸€å®šçš„æ—¶é—´ã€‚
            // ä¸æ¨è
            renderAfterTime: 5000,
            // å¯é€‰-é»˜è®¤ä¸º0ï¼Œæ— é™åˆ¶ã€‚
            // è·¯ç”±æ˜¯å¼‚æ­¥å‘ˆç°çš„ã€‚
            // ä½¿ç”¨å®ƒæ¥é™åˆ¶å¹¶è¡Œæ¸²æŸ“çš„è·¯ç”±æ•°é‡
            maxConcurrentRoutes: 4 ï¼Œ 
          })
        }),
    ]
  }
}
```



**main.jsä¸­è¿›è¡Œé…ç½®**

```javascript
import Vue from 'vue'
import MetaInfo from 'vue-meta-info'


// ......


Vue.use(MetaInfo)
new Vue({
  router,
  store,
  render:h=>h(App),
  mounted(){
     document.dispatchEvent(new Event('render-event'))
  }
}).$mount('#app')
```



`æ³¨ï¼šé¢„æ¸²æŸ“æ–¹å¼ä¸‹çš„routeéœ€é‡‡ç”¨historyæ¨¡å¼ï¼Œå¦åˆ™æ¯ä¸ªæ‰“åŒ…ç”Ÿæˆçš„index.htmlçš„æ–‡ä»¶å†…å®¹ä¼šä¸€æ ·`



## ç»„ä»¶å†…é™æ€ä½¿ç”¨metaInfo

```vue
<template>
...
</template>

<script>
export default {
  metaInfo: {
    title: 'My Example App', // å¯ä»¥æ˜¯å¼‚æ­¥çš„
    meta: [{                 
      name: 'keyWords',
      content: 'é¢„æ¸²æŸ“'
    }]
    link: [{                
      rel: 'asstes',
      href: 'file.wkdevhub.cn'
    }]
  }
}
</script> 
```

